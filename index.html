<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bible Adventures - Fun Games for Kids!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Comic+Neue:wght@300;400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Neue', cursive;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Animated Background Elements */
        .bg-stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .star {
            position: absolute;
            color: #fff;
            animation: twinkle 2s infinite alternate;
        }

        @keyframes twinkle {
            0% { opacity: 0.3; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1.2); }
        }

        /* Login Page Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 3rem;
            border-radius: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 400px;
            width: 100%;
            animation: slideInUp 0.8s ease-out;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-logo {
            font-family: 'Fredoka One', cursive;
            font-size: 2.5rem;
            color: #ff6b6b;
            margin-bottom: 1rem;
            animation: bounce 2s infinite;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .form-group {
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        .form-input:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
            transform: scale(1.02);
        }

        .form-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-size: 1.2rem;
        }

        .login-btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: glow 2s infinite alternate;
        }

        .login-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        /* Navigation */
        nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 3px solid #ff6b6b;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-family: 'Fredoka One', cursive;
            font-size: 2rem;
            color: #ff6b6b;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 700;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-size: 0.9rem;
        }

        .nav-links a:hover {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.8);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .logout-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #ff5252;
            transform: scale(1.05);
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Section Styles */
        .section {
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .section.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dashboard Styles */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .dashboard-card:hover::before {
            left: 100%;
        }

        .dashboard-card:hover {
            transform: translateY(-10px) rotate(2deg);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .dashboard-icon {
            font-size: 3rem;
            color: #ff6b6b;
            margin-bottom: 1rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .dashboard-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .dashboard-label {
            color: #666;
            font-weight: 600;
        }

        /* Level Progress */
        .level-progress {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 20px;
            margin: 2rem 0;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .level-bar {
            width: 100%;
            height: 30px;
            background: rgba(0,0,0,0.1);
            border-radius: 15px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .level-fill {
            height: 100%;
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            border-radius: 15px;
            transition: width 1s ease-out;
            position: relative;
        }

        .level-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Game Styles */
        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .game-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .game-title {
            font-family: 'Fredoka One', cursive;
            font-size: 2.5rem;
            color: #ff6b6b;
            margin-bottom: 1rem;
        }

        .difficulty-indicator {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            margin: 0.5rem;
        }

        .difficulty-easy { background: #4ecdc4; color: white; }
        .difficulty-medium { background: #feca57; color: white; }
        .difficulty-hard { background: #ff6b6b; color: white; }

        .question-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 20px;
            margin-bottom: 2rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: slideInLeft 0.5s ease-out;
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .question-number {
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .answers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .answer-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 1rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .answer-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .answer-btn.correct {
            background: #4ecdc4;
            border-color: #4ecdc4;
            animation: correctAnswer 0.6s ease-out;
        }

        .answer-btn.incorrect {
            background: #ff6b6b;
            border-color: #ff6b6b;
            animation: shake 0.6s ease-out;
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Game Selection Grid */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,107,107,0.1) 0%, transparent 70%);
            animation: rotate 10s linear infinite;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .game-card:hover::before {
            opacity: 1;
        }

        .game-card:hover {
            transform: translateY(-15px) scale(1.05);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .game-icon {
            font-size: 4rem;
            color: #ff6b6b;
            margin-bottom: 1rem;
            animation: bounce 2s infinite;
        }

        .game-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 1rem;
        }

        .game-description {
            color: #666;
            margin-bottom: 1.5rem;
        }

        .play-btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .play-btn:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        /* Memory Game Styles */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            max-width: 400px;
            margin: 2rem auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }

        .memory-card:hover {
            transform: scale(1.05);
        }

        .memory-card.flipped {
            transform: rotateY(180deg);
        }

        .memory-card.matched {
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            animation: matchedCard 0.6s ease-out;
        }

        @keyframes matchedCard {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Word Scramble Styles */
        .scramble-container {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .scrambled-word {
            font-size: 3rem;
            font-weight: 700;
            color: #ff6b6b;
            margin: 2rem 0;
            letter-spacing: 0.2em;
            animation: wiggle 2s infinite;
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(1deg); }
            75% { transform: rotate(-1deg); }
        }

        .scramble-input {
            width: 100%;
            max-width: 300px;
            padding: 1rem;
            font-size: 1.5rem;
            text-align: center;
            border: 3px solid #ff6b6b;
            border-radius: 25px;
            margin: 1rem 0;
            background: rgba(255, 255, 255, 0.9);
        }

        .scramble-input:focus {
            outline: none;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
            transform: scale(1.05);
        }

        /* Drag and Drop Styles */
        .drag-container {
            display: flex;
            justify-content: space-between;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .drag-source, .drag-target {
            flex: 1;
            min-width: 250px;
            padding: 2rem;
            border-radius: 20px;
            min-height: 300px;
        }

        .drag-source {
            background: rgba(255, 107, 107, 0.1);
            border: 3px dashed #ff6b6b;
        }

        .drag-target {
            background: rgba(78, 205, 196, 0.1);
            border: 3px dashed #4ecdc4;
        }

        .drag-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 15px;
            cursor: grab;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .drag-item:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .drag-item.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        /* Coin Animation */
        .coin {
            position: fixed;
            font-size: 2rem;
            color: #feca57;
            pointer-events: none;
            z-index: 1000;
            animation: coinFly 2s ease-out forwards;
        }

        @keyframes coinFly {
            0% {
                transform: translateY(0) rotate(0deg) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(720deg) scale(0);
                opacity: 0;
            }
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 1000;
            animation: confettiFall 3s ease-out forwards;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                gap: 0.5rem;
            }
            
            .nav-links a {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .dashboard-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .games-grid {
                grid-template-columns: 1fr;
            }
            
            .drag-container {
                flex-direction: column;
            }
            
            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
                max-width: 300px;
            }
        }

        /* Sound Toggle */
        .sound-toggle {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .sound-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        @keyframes glow {
            0% { box-shadow: 0 5px 15px rgba(255,107,107,0.4); }
            100% { box-shadow: 0 5px 25px rgba(255,107,107,0.8); }
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Hide elements initially */
        .app-content {
            display: none;
        }

        .login-page {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Animated Background Stars -->
    <div class="bg-stars" id="stars"></div>

    <!-- Login Page -->
    <div class="login-page" id="loginPage">
        <div class="login-container">
            <div class="login-card">
                <div class="login-logo">
                    <i class="fas fa-cross"></i> Bible Adventures
                </div>
                <p style="color: #666; margin-bottom: 2rem;">Welcome back, young explorer!</p>
                
                <form class="login-form" onsubmit="login(event)">
                    <div class="form-group">
                        <i class="fas fa-user form-icon"></i>
                        <input type="text" class="form-input" placeholder="Enter your name" id="username" required>
                    </div>
                    
                    <div class="form-group">
                        <i class="fas fa-birthday-cake form-icon"></i>
                        <input type="number" class="form-input" placeholder="Your age" id="age" min="5" max="35" required>
                    </div>
                    
                    <button type="submit" class="login-btn">
                        <i class="fas fa-play"></i> Start Adventure!
                    </button>
                </form>
                
                <p style="color: #999; font-size: 0.9rem; margin-top: 1rem;">
                    New here? Just enter your name and age to begin!
                </p>
            </div>
        </div>
    </div>

    <!-- Main App Content -->
    <div class="app-content" id="appContent">
        <!-- Navigation -->
        <nav>
            <div class="nav-container">
                <div class="logo">
                    <i class="fas fa-cross"></i> Bible Adventures
                </div>
                <ul class="nav-links">
                    <li><a href="#" onclick="showSection('dashboard')"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="#" onclick="showSection('games')"><i class="fas fa-gamepad"></i> Games</a></li>
                    <li><a href="#" onclick="showSection('quiz')"><i class="fas fa-question-circle"></i> Bible Quiz</a></li>
                    <li><a href="#" onclick="showSection('memory')"><i class="fas fa-brain"></i> Memory</a></li>
                    <li><a href="#" onclick="showSection('scramble')"><i class="fas fa-spell-check"></i> Word Scramble</a></li>
                    <li><a href="#" onclick="showSection('dragdrop')"><i class="fas fa-hand-rock"></i> Match Game</a></li>
                    <li><a href="#" onclick="showSection('story')"><i class="fas fa-book-open"></i> Story Builder</a></li>
                    <li><a href="#" onclick="showSection('rewards')"><i class="fas fa-gift"></i> Rewards</a></li>
                </ul>
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div>
                        <div style="font-weight: 700;" id="userName">Player</div>
                        <div style="font-size: 0.8rem; color: #666;">Level <span id="userLevel">1</span></div>
                    </div>
                    <button class="logout-btn" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Sound Toggle -->
        <button class="sound-toggle" onclick="toggleSound()" id="soundBtn">
            <i class="fas fa-volume-up"></i>
        </button>

        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <div class="game-header">
                    <h1 class="game-title">
                        <i class="fas fa-tachometer-alt"></i> Your Bible Adventure Dashboard
                    </h1>
                    <p style="font-size: 1.2rem; color: #666;">Track your progress and achievements!</p>
                </div>

                <!-- Level Progress -->
                <div class="level-progress">
                    <h3 style="text-align: center; color: #ff6b6b; margin-bottom: 1rem;">
                        <i class="fas fa-star"></i> Level Progress
                    </h3>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <span style="font-weight: 700;">Level <span id="currentLevel">1</span></span>
                        <span style="font-weight: 700;"><span id="currentXP">0</span> / <span id="nextLevelXP">100</span> XP</span>
                    </div>
                    <div class="level-bar">
                        <div class="level-fill" id="levelFill" style="width: 0%;"></div>
                    </div>
                    <div class="difficulty-indicator" id="difficultyLevel">Easy Mode</div>
                </div>

                <!-- Stats Grid -->
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="dashboard-icon"><i class="fas fa-star"></i></div>
                        <div class="dashboard-value" id="totalScore">0</div>
                        <div class="dashboard-label">Total Score</div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="dashboard-icon"><i class="fas fa-coins"></i></div>
                        <div class="dashboard-value" id="totalCoins">0</div>
                        <div class="dashboard-label">Coins Earned</div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="dashboard-icon"><i class="fas fa-gamepad"></i></div>
                        <div class="dashboard-value" id="gamesPlayed">0</div>
                        <div class="dashboard-label">Games Played</div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="dashboard-icon"><i class="fas fa-check-circle"></i></div>
                        <div class="dashboard-value" id="correctAnswers">0</div>
                        <div class="dashboard-label">Correct Answers</div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="dashboard-icon"><i class="fas fa-fire"></i></div>
                        <div class="dashboard-value" id="currentStreak">0</div>
                        <div class="dashboard-label">Current Streak</div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="dashboard-icon"><i class="fas fa-trophy"></i></div>
                        <div class="dashboard-value" id="achievements">0</div>
                        <div class="dashboard-label">Achievements</div>
                    </div>
                </div>
            </section>

            <!-- Games Selection Section -->
            <section id="games" class="section">
                <div class="game-header">
                    <h1 class="game-title">
                        <i class="fas fa-gamepad"></i> Choose Your Adventure!
                    </h1>
                    <p style="font-size: 1.2rem; color: #666;">Pick a game and start learning God's Word!</p>
                </div>

                <div class="games-grid">
                    <div class="game-card" onclick="showSection('quiz')">
                        <div class="game-icon"><i class="fas fa-question-circle"></i></div>
                        <div class="game-name">Bible Quiz Challenge</div>
                        <div class="game-description">Test your Bible knowledge with progressive difficulty levels!</div>
                        <button class="play-btn"><i class="fas fa-play"></i> Play Now</button>
                    </div>
                    
                    <div class="game-card" onclick="showSection('memory')">
                        <div class="game-icon"><i class="fas fa-brain"></i></div>
                        <div class="game-name">Memory Match</div>
                        <div class="game-description">Match Bible characters, verses, and stories!</div>
                        <button class="play-btn"><i class="fas fa-play"></i> Play Now</button>
                    </div>
                    
                    <div class="game-card" onclick="showSection('scramble')">
                        <div class="game-icon"><i class="fas fa-spell-check"></i></div>
                        <div class="game-name">Word Scramble</div>
                        <div class="game-description">Unscramble Bible words and verses!</div>
                        <button class="play-btn"><i class="fas fa-play"></i> Play Now</button>
                    </div>
                    
                    <div class="game-card" onclick="showSection('dragdrop')">
                        <div class="game-icon"><i class="fas fa-hand-rock"></i></div>
                        <div class="game-name">Bible Match</div>
                        <div class="game-description">Drag and drop to match Bible facts!</div>
                        <button class="play-btn"><i class="fas fa-play"></i> Play Now</button>
                    </div>
                    
                    <div class="game-card" onclick="showSection('story')">
                        <div class="game-icon"><i class="fas fa-book-open"></i></div>
                        <div class="game-name">Story Builder</div>
                        <div class="game-description">Put Bible stories in the right order!</div>
                        <button class="play-btn"><i class="fas fa-play"></i> Play Now</button>
                    </div>
                </div>
            </section>

            <!-- Bible Quiz Section -->
            <section id="quiz" class="section">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">
                            <i class="fas fa-question-circle"></i> Bible Quiz Challenge
                        </h2>
                        <div class="difficulty-indicator" id="currentDifficulty">Easy Mode</div>
                        <p>Question <span id="questionNumber">1</span> | Score: <span id="currentScore">0</span> | Streak: <span id="streakCounter">0</span></p>
                    </div>
                    
                    <div id="quizArea">
                        <div class="question-card" id="questionCard">
                            <div class="question-number">Question <span id="qNum">1</span></div>
                            <h3 class="question-text" id="questionText">Click "Next Question" to start your adventure!</h3>
                            <div class="answers" id="answersContainer"></div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 2rem;">
                            <button class="play-btn" onclick="nextQuestion()" id="nextQuestionBtn">
                                <i class="fas fa-forward"></i> Next Question
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Memory Game Section -->
            <section id="memory" class="section">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">
                            <i class="fas fa-brain"></i> Bible Memory Match
                        </h2>
                        <p>Moves: <span id="moveCount">0</span> | Matches: <span id="matchCount">0</span> | Time: <span id="gameTime">0</span>s</p>
                    </div>
                    
                    <div class="memory-grid" id="memoryGrid"></div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="play-btn" onclick="startMemoryGame()">
                            <i class="fas fa-refresh"></i> New Game
                        </button>
                    </div>
                </div>
            </section>

            <!-- Word Scramble Section -->
            <section id="scramble" class="section">
                <div class="game-container">
                    <div class="scramble-container">
                        <div class="game-header">
                            <h2 class="game-title">
                                <i class="fas fa-spell-check"></i> Bible Word Scramble
                            </h2>
                            <p>Unscramble the Bible word!</p>
                        </div>
                        
                        <div class="scrambled-word" id="scrambledWord">CLICK START</div>
                        <div style="color: #666; margin: 1rem 0;" id="scrambleHint">Click "New Word" to begin!</div>
                        
                        <input type="text" class="scramble-input" id="scrambleInput" placeholder="Type your answer here..." onkeypress="checkScrambleEnter(event)">
                        
                        <div style="text-align: center; margin-top: 2rem;">
                            <button class="play-btn" onclick="checkScrambleAnswer()" style="margin: 0.5rem;">
                                <i class="fas fa-check"></i> Check Answer
                            </button>
                            <button class="play-btn" onclick="newScrambleWord()" style="margin: 0.5rem;">
                                <i class="fas fa-refresh"></i> New Word
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Drag and Drop Section -->
            <section id="dragdrop" class="section">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">
                            <i class="fas fa-hand-rock"></i> Bible Match Challenge
                        </h2>
                        <p>Drag items from the left to match them on the right!</p>
                    </div>
                    
                    <div class="drag-container">
                        <div class="drag-source" id="dragSource">
                            <h3 style="text-align: center; color: #ff6b6b; margin-bottom: 1rem;">Bible Characters</h3>
                            <div id="dragItems"></div>
                        </div>
                        
                        <div class="drag-target" id="dragTarget">
                            <h3 style="text-align: center; color: #4ecdc4; margin-bottom: 1rem;">Their Stories</h3>
                            <div id="dropZones"></div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="play-btn" onclick="startDragDropGame()">
                            <i class="fas fa-refresh"></i> New Challenge
                        </button>
                    </div>
                </div>
            </section>

            <!-- Story Builder Section -->
            <section id="story" class="section">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">
                            <i class="fas fa-book-open"></i> Bible Story Builder
                        </h2>
                        <p>Put the Bible story events in the correct order!</p>
                    </div>
                    
                    <div id="storyContainer">
                        <div style="background: rgba(255,107,107,0.1); padding: 2rem; border-radius: 20px; margin: 2rem 0;">
                            <h3 style="color: #ff6b6b; text-align: center; margin-bottom: 1rem;">Story Events (Drag to reorder)</h3>
                            <div id="storyEvents"></div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="play-btn" onclick="checkStoryOrder()" style="margin: 0.5rem;">
                            <i class="fas fa-check"></i> Check Order
                        </button>
                        <button class="play-btn" onclick="newStoryChallenge()" style="margin: 0.5rem;">
                            <i class="fas fa-refresh"></i> New Story
                        </button>
                    </div>
                </div>
            </section>

            <!-- Rewards Section -->
            <section id="rewards" class="section">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">
                            <i class="fas fa-gift"></i> Amazing Rewards Store
                        </h2>
                        <p>Spend your coins on awesome rewards!</p>
                        <div style="background: linear-gradient(45deg, #feca57, #ff9ff3); color: white; padding: 1rem; border-radius: 20px; margin: 1rem 0; display: inline-block;">
                            <i class="fas fa-coins"></i> Your Coins: <span id="rewardCoins">0</span>
                        </div>
                    </div>
                    
                    <div class="games-grid">
                        <div class="game-card">
                            <div class="game-icon"><i class="fas fa-medal"></i></div>
                            <div class="game-name">Bronze Badge</div>
                            <div class="game-description">Your first achievement badge!</div>
                            <div style="color: #feca57; font-weight: 700; margin: 1rem 0;"><i class="fas fa-coins"></i> 50 Coins</div>
                            <button class="play-btn" onclick="buyReward('bronze', 50)">Buy Now</button>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon"><i class="fas fa-crown"></i></div>
                            <div class="game-name">Golden Crown</div>
                            <div class="game-description">Become Bible royalty!</div>
                            <div style="color: #feca57; font-weight: 700; margin: 1rem 0;"><i class="fas fa-coins"></i> 200 Coins</div>
                            <button class="play-btn" onclick="buyReward('crown', 200)">Buy Now</button>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon"><i class="fas fa-star"></i></div>
                            <div class="game-name">Super Star</div>
                            <div class="game-description">Shine bright like a star!</div>
                            <div style="color: #feca57; font-weight: 700; margin: 1rem 0;"><i class="fas fa-coins"></i> 100 Coins</div>
                            <button class="play-btn" onclick="buyReward('star', 100)">Buy Now</button>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon"><i class="fas fa-shield-alt"></i></div>
                            <div class="game-name">Faith Shield</div>
                            <div class="game-description">Protected by faith!</div>
                            <div style="color: #feca57; font-weight: 700; margin: 1rem 0;"><i class="fas fa-coins"></i> 150 Coins</div>
                            <button class="play-btn" onclick="buyReward('shield', 150)">Buy Now</button>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon"><i class="fas fa-heart"></i></div>
                            <div class="game-name">Love Heart</div>
                            <div class="game-description">Spread God's love!</div>
                            <div style="color: #feca57; font-weight: 700; margin: 1rem 0;"><i class="fas fa-coins"></i> 75 Coins</div>
                            <button class="play-btn" onclick="buyReward('heart', 75)">Buy Now</button>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon"><i class="fas fa-dove"></i></div>
                            <div class="game-name">Peace Dove</div>
                            <div class="game-description">Symbol of God's peace!</div>
                            <div style="color: #feca57; font-weight: 700; margin: 1rem 0;"><i class="fas fa-coins"></i> 300 Coins</div>
                            <button class="play-btn" onclick="buyReward('dove', 300)">Buy Now</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            user: {
                name: '',
                age: 0,
                level: 1,
                xp: 0,
                avatar: ''
            },
            score: 0,
            coins: 0,
            gamesPlayed: 0,
            correctAnswers: 0,
            currentStreak: 0,
            achievements: 0,
            soundEnabled: true,
            currentQuestion: null,
            questionNumber: 1,
            difficulty: 'easy',
            memoryGame: {
                moves: 0,
                matches: 0,
                startTime: null,
                cards: [],
                flippedCards: []
            },
            scrambleGame: {
                currentWord: '',
                currentHint: ''
            },
            dragDropGame: {
                matches: []
            },
            storyGame: {
                currentStory: [],
                correctOrder: []
            }
        };

        // Enhanced Bible Questions Database with difficulty levels
        const questionsDatabase = {
            easy: [
                { question: "Who built the ark?", answers: ["Noah", "Moses", "Abraham", "David"], correct: 0, hint: "He saved animals from the flood" },
                { question: "How many days did it rain during the flood?", answers: ["30 days", "40 days", "50 days", "60 days"], correct: 1, hint: "Same number as Jesus fasted" },
                { question: "Who was swallowed by a big fish?", answers: ["Peter", "Paul", "Jonah", "John"], correct: 2, hint: "He tried to run from God" },
                { question: "What did God create on the first day?", answers: ["Animals", "Plants", "Light", "Water"], correct: 2, hint: "Let there be..." },
                { question: "Who was the strongest man in the Bible?", answers: ["David", "Samson", "Goliath", "Joshua"], correct: 1, hint: "His strength was in his hair" },
                { question: "How many disciples did Jesus have?", answers: ["10", "11", "12", "13"], correct: 2, hint: "Same as months in a year" },
                { question: "Who led the Israelites out of Egypt?", answers: ["Aaron", "Moses", "Joshua", "Caleb"], correct: 1, hint: "He parted the Red Sea" },
                { question: "What did Jesus turn water into?", answers: ["Milk", "Juice", "Wine", "Oil"], correct: 2, hint: "At a wedding celebration" },
                { question: "Who was thrown into the lion's den?", answers: ["Daniel", "David", "Elijah", "Elisha"], correct: 0, hint: "He prayed three times a day" },
                { question: "What did David use to defeat Goliath?", answers: ["Sword", "Spear", "Bow", "Sling"], correct: 3, hint: "A simple shepherd's weapon" }
            ],
            medium: [
                { question: "How many books are in the New Testament?", answers: ["25", "26", "27", "28"], correct: 2, hint: "Three cubed" },
                { question: "Who was the first king of Israel?", answers: ["David", "Solomon", "Saul", "Samuel"], correct: 2, hint: "He was tall and handsome" },
                { question: "What was the name of Abraham's wife?", answers: ["Rachel", "Sarah", "Rebecca", "Ruth"], correct: 1, hint: "She laughed when told she'd have a baby" },
                { question: "How many plagues did God send to Egypt?", answers: ["7", "8", "9", "10"], correct: 3, hint: "Same as commandments" },
                { question: "Who wrote most of the Psalms?", answers: ["Solomon", "David", "Moses", "Samuel"], correct: 1, hint: "The shepherd king" },
                { question: "What was the name of the garden where Adam and Eve lived?", answers: ["Paradise", "Heaven", "Eden", "Zion"], correct: 2, hint: "A place of perfect peace" },
                { question: "How many days was Lazarus dead before Jesus raised him?", answers: ["2", "3", "4", "5"], correct: 2, hint: "Jesus said he was sleeping" },
                { question: "What did the wise men bring to baby Jesus?", answers: ["Gold, silver, bronze", "Gold, frankincense, myrrh", "Jewels, spices, cloth", "Food, water, blankets"], correct: 1, hint: "Three precious gifts" },
                { question: "Who betrayed Jesus for 30 pieces of silver?", answers: ["Peter", "John", "Judas", "Thomas"], correct: 2, hint: "He kissed Jesus to identify him" },
                { question: "On which mountain did Moses receive the Ten Commandments?", answers: ["Mount Olive", "Mount Zion", "Mount Sinai", "Mount Carmel"], correct: 2, hint: "A mountain in the wilderness" }
            ],
            hard: [
                { question: "How many years did the Israelites wander in the wilderness?", answers: ["30", "35", "40", "45"], correct: 2, hint: "A generation" },
                { question: "Who was the oldest person mentioned in the Bible?", answers: ["Adam", "Noah", "Methuselah", "Abraham"], correct: 2, hint: "He lived 969 years" },
                { question: "What was the name of the place where Jesus was crucified?", answers: ["Calvary", "Bethany", "Bethlehem", "Capernaum"], correct: 0, hint: "Also called Golgotha" },
                { question: "How many times did Peter deny Jesus?", answers: ["2", "3", "4", "5"], correct: 1, hint: "Before the rooster crowed" },
                { question: "Who was the prophet that was taken up to heaven in a whirlwind?", answers: ["Elijah", "Elisha", "Enoch", "Ezekiel"], correct: 0, hint: "He never died" },
                { question: "What was the name of the city where Jesus was born?", answers: ["Nazareth", "Jerusalem", "Bethlehem", "Capernaum"], correct: 2, hint: "City of David" },
                { question: "How many sons did Jacob have?", answers: ["10", "11", "12", "13"], correct: 2, hint: "They became the tribes of Israel" },
                { question: "Who was the Roman governor who sentenced Jesus to death?", answers: ["Herod", "Caesar", "Pilate", "Felix"], correct: 2, hint: "He washed his hands" },
                { question: "What was the name of the mountain where Jesus was transfigured?", answers: ["Mount Sinai", "Mount Olive", "Mount Hermon", "Mount Tabor"], correct: 3, hint: "He appeared with Moses and Elijah" },
                { question: "How many chapters are in the book of Psalms?", answers: ["147", "148", "149", "150"], correct: 3, hint: "The last one says 'Let everything praise the Lord'" }
            ]
        };

        // Memory Game Data
        const memoryCards = [
            { id: 1, content: 'üôè', pair: 2 },
            { id: 2, content: 'Prayer', pair: 1 },
            { id: 3, content: '‚úùÔ∏è', pair: 4 },
            { id: 4, content: 'Cross', pair: 3 },
            { id: 5, content: 'üìñ', pair: 6 },
            { id: 6, content: 'Bible', pair: 5 },
            { id: 7, content: 'üïäÔ∏è', pair: 8 },
            { id: 8, content: 'Peace', pair: 7 },
            { id: 9, content: '‚ù§Ô∏è', pair: 10 },
            { id: 10, content: 'Love', pair: 9 },
            { id: 11, content: 'üåü', pair: 12 },
            { id: 12, content: 'Star', pair: 11 },
            { id: 13, content: 'üêë', pair: 14 },
            { id: 14, content: 'Sheep', pair: 13 },
            { id: 15, content: 'üèîÔ∏è', pair: 16 },
            { id: 16, content: 'Mountain', pair: 15 }
        ];

        // Word Scramble Data
        const scrambleWords = [
            { word: 'JESUS', hint: 'The Son of God' },
            { word: 'BIBLE', hint: 'God\'s Holy Book' },
            { word: 'PRAYER', hint: 'Talking to God' },
            { word: 'FAITH', hint: 'Believing in God' },
            { word: 'LOVE', hint: 'God\'s greatest commandment' },
            { word: 'PEACE', hint: 'What Jesus gives us' },
            { word: 'GRACE', hint: 'God\'s undeserved favor' },
            { word: 'HOPE', hint: 'Trust in God\'s promises' },
            { word: 'MOSES', hint: 'Led Israel out of Egypt' },
            { word: 'DAVID', hint: 'The shepherd king' },
            { word: 'NOAH', hint: 'Built the ark' },
            { word: 'ABRAHAM', hint: 'Father of many nations' },
            { word: 'DANIEL', hint: 'Survived the lion\'s den' },
            { word: 'JONAH', hint: 'Swallowed by a big fish' }
        ];

        // Drag and Drop Data
        const dragDropData = [
            { character: 'Moses', story: 'Parted the Red Sea' },
            { character: 'David', story: 'Defeated Goliath' },
            { character: 'Noah', story: 'Built the Ark' },
            { character: 'Daniel', story: 'Lion\'s Den' },
            { character: 'Jonah', story: 'Swallowed by Fish' },
            { character: 'Abraham', story: 'Father of Nations' }
        ];

        // Story Builder Data
        const storyData = [
            {
                title: "Noah's Ark",
                events: [
                    "God tells Noah to build an ark",
                    "Noah builds the ark",
                    "Animals enter the ark two by two",
                    "It rains for 40 days and nights",
                    "The ark lands on Mount Ararat",
                    "Noah sends out a dove",
                    "God makes a rainbow covenant"
                ]
            },
            {
                title: "David and Goliath",
                events: [
                    "Goliath challenges the Israelites",
                    "David volunteers to fight",
                    "David chooses five smooth stones",
                    "David faces Goliath with his sling",
                    "David defeats Goliath with one stone",
                    "The Philistines flee in fear"
                ]
            },
            {
                title: "Jesus Feeds 5000",
                events: [
                    "Large crowd follows Jesus",
                    "Disciples worry about feeding everyone",
                    "A boy offers his lunch",
                    "Jesus blesses the five loaves and two fish",
                    "Everyone eats and is satisfied",
                    "Twelve baskets of leftovers remain"
                ]
            }
        ];

        // Initialize the game
        function initGame() {
            createStars();
            loadGameState();
            updateAllDisplays();
        }

        // Create animated stars
        function createStars() {
            const starsContainer = document.getElementById('stars');
            starsContainer.innerHTML = '';
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.innerHTML = '‚ú®';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }

        // Login function
        function login(event) {
            event.preventDefault();
            const username = document.getElementById('username').value.trim();
            const age = parseInt(document.getElementById('age').value);
            
            if (username && age >= 5 && age <= 18) {
                gameState.user.name = username;
                gameState.user.age = age;
                gameState.user.avatar = username.charAt(0).toUpperCase();
                
                // Update UI
                document.getElementById('userName').textContent = username;
                document.getElementById('userAvatar').textContent = gameState.user.avatar;
                
                // Hide login, show app
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('appContent').style.display = 'block';
                
                // Save user data
                saveGameState();
                updateAllDisplays();
                
                playSound('login');
                
                // Welcome message
                setTimeout(() => {
                    alert(`üéâ Welcome to Bible Adventures, ${username}! Let's start your spiritual journey!`);
                }, 500);
            }
        }

        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // Reset game state
                gameState = {
                    user: { name: '', age: 0, level: 1, xp: 0, avatar: '' },
                    score: 0, coins: 0, gamesPlayed: 0, correctAnswers: 0,
                    currentStreak: 0, achievements: 0, soundEnabled: true,
                    currentQuestion: null, questionNumber: 1, difficulty: 'easy',
                    memoryGame: { moves: 0, matches: 0, startTime: null, cards: [], flippedCards: [] },
                    scrambleGame: { currentWord: '', currentHint: '' },
                    dragDropGame: { matches: [] },
                    storyGame: { currentStory: [], correctOrder: [] }
                };
                
                // Clear localStorage
                localStorage.clear();
                
                // Show login, hide app
                document.getElementById('loginPage').style.display = 'block';
                document.getElementById('appContent').style.display = 'none';
                
                // Reset form
                document.getElementById('username').value = '';
                document.getElementById('age').value = '';
                
                playSound('logout');
            }
        }

        // Show section
        function showSection(sectionName) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            document.getElementById(sectionName).classList.add('active');
            playSound('click');
            
            // Update rewards coins display
            if (sectionName === 'rewards') {
                document.getElementById('rewardCoins').textContent = gameState.coins;
            }
        }

        // Update all displays
        function updateAllDisplays() {
            // Dashboard stats
            document.getElementById('totalScore').textContent = gameState.score;
            document.getElementById('totalCoins').textContent = gameState.coins;
            document.getElementById('gamesPlayed').textContent = gameState.gamesPlayed;
            document.getElementById('correctAnswers').textContent = gameState.correctAnswers;
            document.getElementById('currentStreak').textContent = gameState.currentStreak;
            document.getElementById('achievements').textContent = gameState.achievements;
            
            // Level progress
            updateLevelProgress();
            
            // Quiz display
            document.getElementById('currentScore').textContent = gameState.score;
            document.getElementById('streakCounter').textContent = gameState.currentStreak;
            document.getElementById('questionNumber').textContent = gameState.questionNumber;
            
            // User info
            if (gameState.user.name) {
                document.getElementById('userName').textContent = gameState.user.name;
                document.getElementById('userAvatar').textContent = gameState.user.avatar;
                document.getElementById('userLevel').textContent = gameState.user.level;
            }
        }

        // Update level progress
        function updateLevelProgress() {
            const xpNeeded = gameState.user.level * 100;
            const progressPercent = (gameState.user.xp / xpNeeded) * 100;
            
            document.getElementById('currentLevel').textContent = gameState.user.level;
            document.getElementById('currentXP').textContent = gameState.user.xp;
            document.getElementById('nextLevelXP').textContent = xpNeeded;
            document.getElementById('levelFill').style.width = progressPercent + '%';
            
            // Update difficulty based on level
            if (gameState.user.level <= 3) {
                gameState.difficulty = 'easy';
                document.getElementById('difficultyLevel').textContent = 'Easy Mode';
                document.getElementById('difficultyLevel').className = 'difficulty-indicator difficulty-easy';
            } else if (gameState.user.level <= 7) {
                gameState.difficulty = 'medium';
                document.getElementById('difficultyLevel').textContent = 'Medium Mode';
                document.getElementById('difficultyLevel').className = 'difficulty-indicator difficulty-medium';
            } else {
                gameState.difficulty = 'hard';
                document.getElementById('difficultyLevel').textContent = 'Hard Mode';
                document.getElementById('difficultyLevel').className = 'difficulty-indicator difficulty-hard';
            }
            
            document.getElementById('currentDifficulty').textContent = document.getElementById('difficultyLevel').textContent;
            document.getElementById('currentDifficulty').className = document.getElementById('difficultyLevel').className;
            
            // Check for level up
            if (gameState.user.xp >= xpNeeded) {
                levelUp();
            }
        }

        // Level up function
        function levelUp() {
            gameState.user.level++;
            gameState.user.xp = 0;
            gameState.achievements++;
            
            createConfetti();
            playSound('levelup');
            
            setTimeout(() => {
                alert(`üéâ LEVEL UP! You're now Level ${gameState.user.level}! Keep up the great work!`);
            }, 500);
            
            updateAllDisplays();
            saveGameState();
        }

        // Save game state to localStorage
        function saveGameState() {
            localStorage.setItem('bibleGameState', JSON.stringify(gameState));
        }

        // Load game state from localStorage
        function loadGameState() {
            const saved = localStorage.getItem('bibleGameState');
            if (saved) {
                const loadedState = JSON.parse(saved);
                // Merge with default state to handle new properties
                gameState = { ...gameState, ...loadedState };
            }
        }

        // Next Question function (infinite quiz)
        function nextQuestion() {
            const questions = questionsDatabase[gameState.difficulty];
            const randomIndex = Math.floor(Math.random() * questions.length);
            gameState.currentQuestion = questions[randomIndex];
            
            const questionText = document.getElementById('questionText');
            const answersContainer = document.getElementById('answersContainer');
            const qNum = document.getElementById('qNum');
            
            questionText.textContent = gameState.currentQuestion.question;
            qNum.textContent = gameState.questionNumber;
            answersContainer.innerHTML = '';
            
            gameState.currentQuestion.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = answer;
                button.onclick = () => checkAnswer(index, button);
                answersContainer.appendChild(button);
            });
            
            playSound('question');
        }

        // Check answer function
        function checkAnswer(selectedIndex, buttonElement) {
            const isCorrect = selectedIndex === gameState.currentQuestion.correct;
            const allButtons = document.querySelectorAll('.answer-btn');
            
            // Disable all buttons
            allButtons.forEach(btn => btn.style.pointerEvents = 'none');
            
            if (isCorrect) {
                buttonElement.classList.add('correct');
                
                // Calculate points based on difficulty and streak
                let points = 50;
                if (gameState.difficulty === 'medium') points = 75;
                if (gameState.difficulty === 'hard') points = 100;
                
                // Streak bonus
                if (gameState.currentStreak >= 5) points *= 1.5;
                if (gameState.currentStreak >= 10) points *= 2;
                
                points = Math.floor(points);
                
                gameState.score += points;
                gameState.coins += Math.floor(points / 10);
                gameState.correctAnswers++;
                gameState.currentStreak++;
                gameState.user.xp += Math.floor(points / 5);
                
                // Create coin animation
                createCoinAnimation(buttonElement);
                createConfetti();
                playSound('correct');
                
                setTimeout(() => {
                    alert(`üéâ Correct! You earned ${points} points and ${Math.floor(points / 10)} coins! Streak: ${gameState.currentStreak}`);
                }, 500);
            } else {
                buttonElement.classList.add('incorrect');
                allButtons[gameState.currentQuestion.correct].classList.add('correct');
                gameState.currentStreak = 0;
                
                playSound('incorrect');
                
                setTimeout(() => {
                    alert(`‚ùå Oops! The correct answer was: ${gameState.currentQuestion.answers[gameState.currentQuestion.correct]}\nHint: ${gameState.currentQuestion.hint}`);
                }, 500);
            }
            
            gameState.gamesPlayed++;
            gameState.questionNumber++;
            updateAllDisplays();
            saveGameState();
            
            // Re-enable buttons after delay
            setTimeout(() => {
                allButtons.forEach(btn => {
                    btn.style.pointerEvents = 'auto';
                    btn.classList.remove('correct', 'incorrect');
                });
            }, 3000);
        }

        // Memory Game Functions
        function startMemoryGame() {
            gameState.memoryGame = {
                moves: 0,
                matches: 0,
                startTime: Date.now(),
                cards: [...memoryCards].sort(() => Math.random() - 0.5).slice(0, 16),
                flippedCards: []
            };
            
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            
            gameState.memoryGame.cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'memory-card';
                cardElement.innerHTML = '?';
                cardElement.dataset.cardId = card.id;
                cardElement.dataset.index = index;
                cardElement.onclick = () => flipCard(cardElement, card);
                grid.appendChild(cardElement);
            });
            
            updateMemoryStats();
            playSound('start');
        }

        function flipCard(cardElement, card) {
            if (gameState.memoryGame.flippedCards.length >= 2 || cardElement.classList.contains('flipped')) {
                return;
            }
            
            cardElement.classList.add('flipped');
            cardElement.innerHTML = card.content;
            gameState.memoryGame.flippedCards.push({ element: cardElement, card: card });
            
            if (gameState.memoryGame.flippedCards.length === 2) {
                gameState.memoryGame.moves++;
                updateMemoryStats();
                
                setTimeout(() => {
                    checkMemoryMatch();
                }, 1000);
            }
            
            playSound('flip');
        }

        function checkMemoryMatch() {
            const [first, second] = gameState.memoryGame.flippedCards;
            
            if (first.card.pair === second.card.id || second.card.pair === first.card.id) {
                // Match found
                first.element.classList.add('matched');
                second.element.classList.add('matched');
                gameState.memoryGame.matches++;
                
                // Award points
                gameState.score += 25;
                gameState.coins += 3;
                gameState.user.xp += 5;
                
                playSound('correct');
                createCoinAnimation(first.element);
                
                // Check if game complete
                if (gameState.memoryGame.matches === 8) {
                    const timeBonus = Math.max(100 - Math.floor((Date.now() - gameState.memoryGame.startTime) / 1000), 10);
                    gameState.score += timeBonus;
                    gameState.coins += Math.floor(timeBonus / 10);
                    
                    setTimeout(() => {
                        alert(`üéâ Memory Game Complete! Time bonus: ${timeBonus} points!`);
                    }, 500);
                    
                    createConfetti();
                }
            } else {
                // No match
                first.element.classList.remove('flipped');
                second.element.classList.remove('flipped');
                first.element.innerHTML = '?';
                second.element.innerHTML = '?';
                
                playSound('incorrect');
            }
            
            gameState.memoryGame.flippedCards = [];
            updateAllDisplays();
            saveGameState();
        }

        function updateMemoryStats() {
            document.getElementById('moveCount').textContent = gameState.memoryGame.moves;
            document.getElementById('matchCount').textContent = gameState.memoryGame.matches;
            
            if (gameState.memoryGame.startTime) {
                const elapsed = Math.floor((Date.now() - gameState.memoryGame.startTime) / 1000);
                document.getElementById('gameTime').textContent = elapsed;
            }
        }

        // Word Scramble Functions
        function newScrambleWord() {
            const randomWord = scrambleWords[Math.floor(Math.random() * scrambleWords.length)];
            gameState.scrambleGame.currentWord = randomWord.word;
            gameState.scrambleGame.currentHint = randomWord.hint;
            
            // Scramble the word
            const scrambled = randomWord.word.split('').sort(() => Math.random() - 0.5).join('');
            
            document.getElementById('scrambledWord').textContent = scrambled;
            document.getElementById('scrambleHint').textContent = `Hint: ${randomWord.hint}`;
            document.getElementById('scrambleInput').value = '';
            document.getElementById('scrambleInput').focus();
            
            playSound('start');
        }

        function checkScrambleAnswer() {
            const userAnswer = document.getElementById('scrambleInput').value.toUpperCase().trim();
            
            if (userAnswer === gameState.scrambleGame.currentWord) {
                // Correct answer
                gameState.score += 30;
                gameState.coins += 5;
                gameState.user.xp += 6;
                gameState.correctAnswers++;
                
                createConfetti();
                playSound('correct');
                
                alert(`üéâ Correct! The word was "${gameState.scrambleGame.currentWord}"! You earned 30 points!`);
                
                // Auto-generate new word
                setTimeout(() => {
                    newScrambleWord();
                }, 1000);
            } else {
                playSound('incorrect');
                alert(`‚ùå Try again! Hint: ${gameState.scrambleGame.currentHint}`);
            }
            
            updateAllDisplays();
            saveGameState();
        }

        function checkScrambleEnter(event) {
            if (event.key === 'Enter') {
                checkScrambleAnswer();
            }
        }

        // Drag and Drop Functions
        function startDragDropGame() {
            const shuffledData = [...dragDropData].sort(() => Math.random() - 0.5).slice(0, 4);
            gameState.dragDropGame.matches = shuffledData;
            
            const dragItems = document.getElementById('dragItems');
            const dropZones = document.getElementById('dropZones');
            
            dragItems.innerHTML = '';
            dropZones.innerHTML = '';
            
            // Create draggable items
            shuffledData.forEach((item, index) => {
                const dragItem = document.createElement('div');
                dragItem.className = 'drag-item';
                dragItem.textContent = item.character;
                dragItem.draggable = true;
                dragItem.dataset.character = item.character;
                dragItem.dataset.story = item.story;
                
                dragItem.ondragstart = (e) => {
                    e.dataTransfer.setData('text/plain', JSON.stringify(item));
                    dragItem.classList.add('dragging');
                };
                
                dragItem.ondragend = () => {
                    dragItem.classList.remove('dragging');
                };
                
                dragItems.appendChild(dragItem);
            });
            
            // Create drop zones
            const shuffledStories = shuffledData.map(item => item.story).sort(() => Math.random() - 0.5);
            shuffledStories.forEach((story, index) => {
                const dropZone = document.createElement('div');
                dropZone.className = 'drag-item';
                dropZone.textContent = story;
                dropZone.style.backgroundColor = 'rgba(78, 205, 196, 0.2)';
                dropZone.dataset.story = story;
                
                dropZone.ondragover = (e) => {
                    e.preventDefault();
                    dropZone.style.backgroundColor = 'rgba(78, 205, 196, 0.4)';
                };
                
                dropZone.ondragleave = () => {
                    dropZone.style.backgroundColor = 'rgba(78, 205, 196, 0.2)';
                };
                
                dropZone.ondrop = (e) => {
                    e.preventDefault();
                    const draggedItem = JSON.parse(e.dataTransfer.getData('text/plain'));
                    
                    if (draggedItem.story === story) {
                        // Correct match
                        dropZone.style.backgroundColor = '#4ecdc4';
                        dropZone.style.color = 'white';
                        dropZone.innerHTML = `‚úÖ ${draggedItem.character} - ${story}`;
                        
                        // Remove dragged item
                        const draggedElement = document.querySelector(`[data-character="${draggedItem.character}"]`);
                        if (draggedElement) {
                            draggedElement.remove();
                        }
                        
                        // Award points
                        gameState.score += 40;
                        gameState.coins += 6;
                        gameState.user.xp += 8;
                        
                        createCoinAnimation(dropZone);
                        playSound('correct');
                        
                        // Check if all matched
                        if (document.querySelectorAll('#dragItems .drag-item').length === 0) {
                            setTimeout(() => {
                                alert('üéâ Perfect! You matched all the Bible characters with their stories!');
                                createConfetti();
                            }, 500);
                        }
                    } else {
                        // Incorrect match
                        dropZone.style.backgroundColor = '#ff6b6b';
                        setTimeout(() => {
                            dropZone.style.backgroundColor = 'rgba(78, 205, 196, 0.2)';
                        }, 1000);
                        
                        playSound('incorrect');
                    }
                    
                    updateAllDisplays();
                    saveGameState();
                };
                
                dropZones.appendChild(dropZone);
            });
            
            playSound('start');
        }

        // Story Builder Functions
        function newStoryChallenge() {
            const randomStory = storyData[Math.floor(Math.random() * storyData.length)];
            gameState.storyGame.correctOrder = [...randomStory.events];
            gameState.storyGame.currentStory = [...randomStory.events].sort(() => Math.random() - 0.5);
            
            const container = document.getElementById('storyEvents');
            container.innerHTML = '';
            
            gameState.storyGame.currentStory.forEach((event, index) => {
                const eventElement = document.createElement('div');
                eventElement.className = 'drag-item';
                eventElement.textContent = `${index + 1}. ${event}`;
                eventElement.draggable = true;
                eventElement.dataset.event = event;
                eventElement.dataset.index = index;
                
                eventElement.ondragstart = (e) => {
                    e.dataTransfer.setData('text/plain', index);
                    eventElement.classList.add('dragging');
                };
                
                eventElement.ondragend = () => {
                    eventElement.classList.remove('dragging');
                };
                
                eventElement.ondragover = (e) => {
                    e.preventDefault();
                };
                
                eventElement.ondrop = (e) => {
                    e.preventDefault();
                    const draggedIndex = parseInt(e.dataTransfer.getData('text/plain'));
                    const targetIndex = parseInt(eventElement.dataset.index);
                    
                    if (draggedIndex !== targetIndex) {
                        // Swap elements
                        const temp = gameState.storyGame.currentStory[draggedIndex];
                        gameState.storyGame.currentStory[draggedIndex] = gameState.storyGame.currentStory[targetIndex];
                        gameState.storyGame.currentStory[targetIndex] = temp;
                        
                        // Refresh display
                        newStoryChallenge();
                    }
                };
                
                container.appendChild(eventElement);
            });
            
            playSound('start');
        }

        function checkStoryOrder() {
            const isCorrect = JSON.stringify(gameState.storyGame.currentStory) === JSON.stringify(gameState.storyGame.correctOrder);
            
            if (isCorrect) {
                // Correct order
                gameState.score += 100;
                gameState.coins += 15;
                gameState.user.xp += 20;
                gameState.correctAnswers++;
                
                createConfetti();
                playSound('correct');
                
                alert('üéâ Perfect! You got the Bible story events in the correct order! Great job!');
            } else {
                playSound('incorrect');
                alert('‚ùå Not quite right. Try rearranging the events. Think about what happened first, second, and so on.');
            }
            
            updateAllDisplays();
            saveGameState();
        }

        // Reward System
        function buyReward(rewardType, cost) {
            if (gameState.coins >= cost) {
                gameState.coins -= cost;
                gameState.achievements++;
                
                createCoinAnimation(event.target);
                playSound('purchase');
                
                alert(`üéâ Congratulations! You bought the ${rewardType}! It's been added to your collection!`);
                
                updateAllDisplays();
                saveGameState();
            } else {
                alert(`üí∞ You need ${cost - gameState.coins} more coins to buy this reward! Keep playing to earn more!`);
                playSound('error');
            }
        }

        // Animation Functions
        function createCoinAnimation(sourceElement) {
            const rect = sourceElement.getBoundingClientRect();
            
            for (let i = 0; i < 5; i++) {
                const coin = document.createElement('div');
                coin.className = 'coin';
                coin.innerHTML = 'ü™ô';
                coin.style.left = (rect.left + rect.width / 2) + 'px';
                coin.style.top = (rect.top + rect.height / 2) + 'px';
                coin.style.animationDelay = (i * 0.1) + 's';
                
                document.body.appendChild(coin);
                
                setTimeout(() => {
                    coin.remove();
                }, 2000);
            }
        }

        function createConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'];
            
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        }

        // Sound Functions
        function playSound(type) {
            if (!gameState.soundEnabled) return;
            
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            let frequency, duration;
            
            switch (type) {
                case 'correct':
                    frequency = 800;
                    duration = 0.3;
                    break;
                case 'incorrect':
                    frequency = 200;
                    duration = 0.5;
                    break;
                case 'click':
                    frequency = 600;
                    duration = 0.1;
                    break;
                case 'purchase':
                    frequency = 1000;
                    duration = 0.4;
                    break;
                case 'question':
                case 'start':
                    frequency = 400;
                    duration = 0.2;
                    break;
                case 'error':
                    frequency = 150;
                    duration = 0.6;
                    break;
                case 'login':
                    frequency = 900;
                    duration = 0.5;
                    break;
                case 'logout':
                    frequency = 300;
                    duration = 0.3;
                    break;
                case 'levelup':
                    frequency = 1200;
                    duration = 0.8;
                    break;
                case 'flip':
                    frequency = 500;
                    duration = 0.15;
                    break;
                default:
                    return;
            }
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        function toggleSound() {
            gameState.soundEnabled = !gameState.soundEnabled;
            const soundBtn = document.getElementById('soundBtn');
            
            if (gameState.soundEnabled) {
                soundBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            } else {
                soundBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
            }
            
            saveGameState();
            playSound('click');
        }

        // Initialize game when page loads
        window.addEventListener('load', () => {
            initGame();
            
            // Check if user is already logged in
            const saved = localStorage.getItem('bibleGameState');
            if (saved) {
                const loadedState = JSON.parse(saved);
                if (loadedState.user && loadedState.user.name) {
                    // Auto-login
                    gameState.user = loadedState.user;
                    document.getElementById('userName').textContent = gameState.user.name;
                    document.getElementById('userAvatar').textContent = gameState.user.avatar;
                    document.getElementById('userLevel').textContent = gameState.user.level;
                    
                    document.getElementById('loginPage').style.display = 'none';
                    document.getElementById('appContent').style.display = 'block';
                }
            }
        });

        // Auto-save every 30 seconds
        setInterval(() => {
            if (gameState.user.name) {
                saveGameState();
            }
        }, 30000);

        // Update memory game timer
        setInterval(() => {
            if (gameState.memoryGame.startTime && document.getElementById('memory').classList.contains('active')) {
                updateMemoryStats();
            }
        }, 1000);
    </script>
</body>
</html>
